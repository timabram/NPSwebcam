
<!DOCTYPE html>
<html>
<head>
<title>Example</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
<!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> -->
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<!--<script src="leaflet-providers.js"></script>-->


<style>
  body { margin:0; padding:0; 
@font-face {
font-family: Rawlinson;
src: url("./Rawlinson.otf") format("opentype");
}
  }
  #mapid { position:absolute; top:0; bottom:0; width:100%; }
  /* css to customize Leaflet default styles  */
.custom .leaflet-popup-tip,
.custom .leaflet-popup-content-wrapper {
    background: #a65523;
    color: #ffffff;
}
.title-style {
    padding: 50px 30px 50px 80px
    background: rgba(0,0,0,0.5);
    color: #fff;
    font-size: 20px;
    line-height: 18px;
    border-radius: 5px;
}

.title-style:empty {
    display: none;
}
.description-style {
    padding: 50px 30px 50px 80px;
    background: rgba(0,0,0,0.75);
    color: #fff;
    font-size: 12px;
    line-height: 18px;
    border-radius: 5px;
}

.description-style:empty {
    display: none;
}
</style>
</head>

<body>
<!--	<center><div id="mapid" style="width: 1200px; height: 800px"></div></center>-->
<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<div id = "mapid"></div>
<script>
	var mymap = L.map('mapid').setView([39.328999, -99.553566], 5);
	L.tileLayer('https://api.mapbox.com/styles/v1/timabram/ciqbgm8i1000ic5javckwt0xh/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoidGltYWJyYW0iLCJhIjoiY2lxYmdpa2xsMDBuemZybTFtM3oya3A3dSJ9.LFhhmOqkLbVbJG7ED6rNgQ', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap);
	

var TitleBox = L.Control.extend({
    options: {position: 'topleft'},
    onAdd: function (map) {return L.DomUtil.create('div', 'title-style');},
    setContent: function (content) {this.getContainer().innerHTML = content;}
});

var DescriptionBox = L.Control.extend({
    options: {position: 'bottomleft'},
    onAdd: function (map) {return L.DomUtil.create('div', 'description-style');},
    setContent: function (content) {this.getContainer().innerHTML = content;}
});

// Assign to a variable so you can use it later and add it to your map
var x =  new TitleBox().addTo(mymap);
x.setContent('<h1>National Park Webcam Map</h1>');

var y =  new DescriptionBox().addTo(mymap);
y.setContent('Explore the dynamics of your National Park system through daily updated timelapse videos.<br>' +
'Select a marker to view videos specific to each National Park webcam.');


var myIcon = L.Icon.extend({
    iconUrl: 'https://raw.githubusercontent.com/timabram/NPSwebcam/gh-pages/arrowhead_marker.png',
    shadowUrl: 'https://raw.githubusercontent.com/Leaflet/Leaflet/master/dist/images/marker-shadow.png',
    iconSize: 1
    
});
//var customIcon = new myIcon();

function addDataToMap(data, map) {
// specify popup options 
    var customOptions =
        {
        'maxWidth': '500',
        'className' : 'custom'
        }
	
    var dataLayer = L.geoJson(data, {
    	/*style: function(feature){
    		return {icon: customIcon};
    	},*/

   	pointToLayer: function(feature, latlng){
   		//var customIcon = L.Icon({
   			//iconUrl: 'https://raw.githubusercontent.com/timabram/NPSwebcam/gh-pages/arrowhead_marker.png'
   	//		iconSize: [38, 95]
   	//	});
   	//	return L.marker(latlng, {icon: customIcon});
    	//return new L.CircleMarker(latlng, {radius: 10, fillOpacity: 0.85});
    	return new L.Marker(latlng, {icon: new myIcon({
    		iconUrl: 'https://raw.githubusercontent.com/timabram/NPSwebcam/gh-pages/arrowhead_marker.png'
    		})
    	});
    	},
    	    	onEachFeature: function(feature, layer) {
            var popupText = "<h1>" + feature.properties.name + "</h1>" +  
            "<br><center>" + feature.properties.youtube_link + "</center>";
            layer.bindPopup(popupText, customOptions); 
        }

        });
    dataLayer.addTo(map);
}

/*geojsonLayer = L.geoJson(geojson, {
    style: function(feature) {
        return {color: feature.properties.GPSUserColor};
    },
    pointToLayer: function(feature, latlng) {
        return new L.CircleMarker(latlng, {radius: 10, fillOpacity: 0.85});
    },
    onEachFeature: function (feature, layer) {
        layer.bindPopup(feature.properties.GPSUserName);
    }
});*/




$.getJSON("https://raw.githubusercontent.com/timabram/NPSwebcam/gh-pages/geojson_output.geojson", 
function(data) { addDataToMap(data, mymap); });
	

</script>
</body>
</html>
